<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éšæœºè¯­éŸ³æ’­æ”¾å™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
            max-width: 500px;
            width: 100%;
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
        }
        
        .player {
            margin: 30px 0;
        }
        
        #playButton {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 50px;
            font-size: 20px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
            font-weight: bold;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        
        #playButton:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
        }
        
        #playButton:active {
            transform: translateY(1px);
        }
        
        .playing {
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .current-playing {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #667eea;
        }
        
        .current-playing h3 {
            color: #333;
            margin-bottom: 5px;
            font-size: 16px;
        }
        
        #currentVoice {
            color: #667eea;
            font-weight: bold;
            font-size: 18px;
        }
        
        .instructions {
            margin-top: 30px;
            padding: 20px;
            background: #f0f2ff;
            border-radius: 10px;
            text-align: left;
        }
        
        .instructions h3 {
            color: #333;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .voice-list {
            margin-top: 20px;
        }
        
        .voice-item {
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .voice-item.playing-now {
            background: #e6f7ff;
            border: 2px solid #667eea;
        }
        
        .status {
            margin: 20px 0;
            padding: 10px;
            border-radius: 8px;
            font-weight: bold;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 25px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            #playButton {
                padding: 15px 40px;
                font-size: 18px;
            }
        }
        
        /* NFCå›¾æ ‡æ ·å¼ */
        .nfc-icon {
            display: inline-block;
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            position: relative;
        }
        
        .nfc-icon:after {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 2px;
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loader {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            vertical-align: middle;
            margin-right: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸµ éšæœºè¯­éŸ³æ’­æ”¾å™¨</h1>
        <p class="subtitle">è§¦ç¢°NFCè´´ç‰‡åï¼Œç‚¹å‡»æŒ‰é’®æ’­æ”¾éšæœºè¯­éŸ³</p>
        
        <div class="player">
            <button id="playButton">
                æ’­æ”¾éšæœºè¯­éŸ³
            </button>
            
            <div class="status" id="status" style="display: none;"></div>
            
            <div class="current-playing">
                <h3>å½“å‰æ’­æ”¾ï¼š</h3>
                <div id="currentVoice">ç­‰å¾…æ’­æ”¾...</div>
            </div>
            
            <div class="voice-list">
                <h3>ğŸ“ è¯­éŸ³åº“ï¼š</h3>
                <div id="voiceList">
                    <!-- è¯­éŸ³åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
        
        <div class="instructions">
            <h3><span class="nfc-icon"></span> ä½¿ç”¨è¯´æ˜ï¼š</h3>
            <p>1. å°†æ‰‹æœºé è¿‘NFCè´´ç‰‡è‡ªåŠ¨æ‰“å¼€æ­¤é¡µé¢</p>
            <p>2. ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ’­æ”¾éšæœºè¯­éŸ³</p>
            <p>3. ç‚¹å‡»ä¸‹æ–¹åˆ—è¡¨ä¸­çš„è¯­éŸ³å¯å•ç‹¬æ’­æ”¾</p>
            <p>4. å¦‚éœ€æ›´æ¢è¯­éŸ³ï¼Œè¯·æ›¿æ¢GitHubä»“åº“ä¸­çš„éŸ³é¢‘æ–‡ä»¶</p>
        </div>
    </div>

    <script>
        // éŸ³é¢‘æ–‡ä»¶åˆ—è¡¨ - éœ€è¦ä¿®æ”¹ä¸ºä½ ä¸Šä¼ çš„æ–‡ä»¶å
        const voiceFiles = [
            {
                name: "è¯­éŸ³1",
                url: "audios/32d4af71b57ed5ac4101d2936dd0df28.mp3"  // å¦‚æœéŸ³é¢‘åœ¨audiosæ–‡ä»¶å¤¹ï¼Œæ”¹ä¸º"audios/voice1.mp3"
            },
            {
                name: "è¯­éŸ³2", 
                url: "audios/49817f1070e5cc2c8b0b4646658b6bc3.mp3"  // å¦‚æœéŸ³é¢‘åœ¨audiosæ–‡ä»¶å¤¹ï¼Œæ”¹ä¸º"audios/voice2.mp3"
            }
            // å¦‚æœéœ€è¦æ·»åŠ æ›´å¤šï¼Œåœ¨è¿™é‡Œç»§ç»­æ·»åŠ 
            // {name: "è¯­éŸ³3", url: "voice3.mp3"},
            // {name: "è¯­éŸ³4", url: "voice4.mp3"},
        ];
        
        let currentAudio = null;
        let isPlaying = false;
        
        // DOMå…ƒç´ 
        const playButton = document.getElementById('playButton');
        const currentVoiceDisplay = document.getElementById('currentVoice');
        const voiceListContainer = document.getElementById('voiceList');
        const statusDisplay = document.getElementById('status');
        
        // æ˜¾ç¤ºçŠ¶æ€ä¿¡æ¯
        function showStatus(message, type = 'success') {
            statusDisplay.textContent = message;
            statusDisplay.className = `status ${type}`;
            statusDisplay.style.display = 'block';
            
            setTimeout(() => {
                statusDisplay.style.display = 'none';
            }, 3000);
        }
        
        // æ’­æ”¾æŒ‡å®šè¯­éŸ³
        function playVoice(voice) {
            // åœæ­¢å½“å‰æ’­æ”¾çš„éŸ³é¢‘
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
            }
            
            // æ›´æ–°ç•Œé¢æ˜¾ç¤º
            currentVoiceDisplay.textContent = voice.name;
            playButton.innerHTML = '<span class="loader"></span> æ­£åœ¨æ’­æ”¾...';
            playButton.classList.add('playing');
            
            // åˆ›å»ºæ–°çš„éŸ³é¢‘å¯¹è±¡
            currentAudio = new Audio(voice.url);
            
            // æ’­æ”¾æˆåŠŸ
            currentAudio.onplay = () => {
                isPlaying = true;
                playButton.innerHTML = 'â¸ï¸ åœæ­¢æ’­æ”¾';
                showStatus(`æ­£åœ¨æ’­æ”¾ï¼š${voice.name}`, 'success');
                
                // é«˜äº®æ˜¾ç¤ºå½“å‰æ’­æ”¾çš„è¯­éŸ³
                document.querySelectorAll('.voice-item').forEach(item => {
                    item.classList.remove('playing-now');
                    if (item.dataset.voiceName === voice.name) {
                        item.classList.add('playing-now');
                    }
                });
            };
            
            // æ’­æ”¾ç»“æŸ
            currentAudio.onended = () => {
                isPlaying = false;
                playButton.textContent = 'æ’­æ”¾éšæœºè¯­éŸ³';
                playButton.classList.remove('playing');
                currentVoiceDisplay.textContent = 'æ’­æ”¾å®Œæˆ';
                document.querySelectorAll('.voice-item').forEach(item => {
                    item.classList.remove('playing-now');
                });
            };
            
            // æ’­æ”¾é”™è¯¯å¤„ç†
            currentAudio.onerror = () => {
                playButton.textContent = 'æ’­æ”¾éšæœºè¯­éŸ³';
                playButton.classList.remove('playing');
                showStatus(`æ’­æ”¾å¤±è´¥ï¼šè¯·æ£€æŸ¥ç½‘ç»œæˆ–æ–‡ä»¶è·¯å¾„`, 'error');
            };
            
            // å¼€å§‹æ’­æ”¾
            currentAudio.play();
        }
        
        // éšæœºæ’­æ”¾è¯­éŸ³
        function playRandomVoice() {
            if (isPlaying && currentAudio) {
                // å¦‚æœæ­£åœ¨æ’­æ”¾ï¼Œåœæ­¢æ’­æ”¾
                currentAudio.pause();
                currentAudio.currentTime = 0;
                isPlaying = false;
                playButton.textContent = 'æ’­æ”¾éšæœºè¯­éŸ³';
                playButton.classList.remove('playing');
                currentVoiceDisplay.textContent = 'å·²åœæ­¢';
                document.querySelectorAll('.voice-item').forEach(item => {
                    item.classList.remove('playing-now');
                });
                return;
            }
            
            if (voiceFiles.length === 0) {
                showStatus('è¯­éŸ³åº“ä¸ºç©ºï¼Œè¯·æ·»åŠ è¯­éŸ³æ–‡ä»¶', 'error');
                return;
            }
            
            // éšæœºé€‰æ‹©è¯­éŸ³
            const randomIndex = Math.floor(Math.random() * voiceFiles.length);
            const randomVoice = voiceFiles[randomIndex];
            
            playVoice(randomVoice);
        }
        
        // åˆå§‹åŒ–è¯­éŸ³åˆ—è¡¨
        function initVoiceList() {
            voiceListContainer.innerHTML = '';
            
            voiceFiles.forEach((voice, index) => {
                const voiceItem = document.createElement('div');
                voiceItem.className = 'voice-item';
                voiceItem.dataset.voiceName = voice.name;
                
                voiceItem.innerHTML = `
                    <span>${index + 1}. ${voice.name}</span>
                    <button class="play-single" style="
                        margin-left: auto;
                        background: #28a745;
                        color: white;
                        border: none;
                        padding: 5px 15px;
                        border-radius: 20px;
                        cursor: pointer;
                        font-size: 12px;
                    ">æ’­æ”¾</button>
                `;
                
                // ç‚¹å‡»æ’­æ”¾å•ä¸ªè¯­éŸ³
                voiceItem.querySelector('.play-single').addEventListener('click', (e) => {
                    e.stopPropagation();
                    playVoice(voice);
                });
                
                voiceListContainer.appendChild(voiceItem);
            });
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            initVoiceList();
            
            // ç»‘å®šæ’­æ”¾æŒ‰é’®äº‹ä»¶
            playButton.addEventListener('click', playRandomVoice);
            
            // è‡ªåŠ¨æµ‹è¯•éŸ³é¢‘æ–‡ä»¶
            setTimeout(() => {
                console.log('éŸ³é¢‘æ–‡ä»¶æµ‹è¯•ï¼š');
                voiceFiles.forEach(voice => {
                    console.log(`æµ‹è¯• ${voice.name}: ${voice.url}`);
                });
            }, 1000);
        });
        
        // é”®ç›˜å¿«æ·é”®æ”¯æŒ
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' || e.code === 'Enter') {
                e.preventDefault();
                playRandomVoice();
            }
            
            // æ•°å­—é”®1-9æ’­æ”¾å¯¹åº”è¯­éŸ³
            if (e.key >= '1' && e.key <= '9') {
                const index = parseInt(e.key) - 1;
                if (index < voiceFiles.length) {
                    playVoice(voiceFiles[index]);
                }
            }
        });
        
        // æ·»åŠ åˆ°ä¸»å±å¹•æç¤ºï¼ˆç§»åŠ¨ç«¯ï¼‰
        if ('standalone' in navigator || window.matchMedia('(display-mode: standalone)').matches) {
            console.log('å½“å‰ä¸ºPWAåº”ç”¨æ¨¡å¼');
        }
        
        // é¡µé¢å¯è§æ€§å˜åŒ–å¤„ç†
        document.addEventListener('visibilitychange', () => {
            if (document.hidden && currentAudio && isPlaying) {
                // é¡µé¢è¢«éšè—æ—¶æš‚åœæ’­æ”¾
                currentAudio.pause();
                playButton.textContent = 'æ’­æ”¾éšæœºè¯­éŸ³';
                playButton.classList.remove('playing');
                isPlaying = false;
            }
        });
    </script>
</body>
</html>
